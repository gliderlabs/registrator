FROM gliderlabs/alpine:3.1
CMD ["/bin/registrator"]

ENV DOCKER_TLS_PATH="/certs" DOCKER_HOST="unix:///tmp/docker.sock" GOPATH="/go"
RUN apk-install go git mercurial
COPY . /go/src/github.com/gliderlabs/registrator
RUN cd /go/src/github.com/gliderlabs/registrator \
	&& go get \
	&& go build -ldflags "-X main.Version dev" -o /bin/registrator
